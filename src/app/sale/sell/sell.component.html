<div class="sell-container">
    <h2>Nova Venda</h2>
  
    <!-- Busca de Produto -->
    <div class="search-product">
      <label for="product-search">Buscar Produto:</label>
      <input
        type="text"
        id="product-search"
        [(ngModel)]="searchQuery"
        placeholder="Digite o nome do produto"
        (input)="onSearchProduct()"
      />
      <ul *ngIf="filteredProducts.length > 0" class="product-list">
        <li
          *ngFor="let product of filteredProducts"
          (click)="selectProduct(product)"
        >
          <img
            [src]="(API_IMAGE_URL + '/' + product.image)"
            alt="{{ product.name }}"
            class="product-thumbnail"
          />
          <span>{{ product.name }} - R$ {{ null | number: '1.2-2' }}</span>
        </li>
      </ul>
    </div>
  
    <!-- Produto Selecionado -->
    <div *ngIf="selectedProduct" class="selected-product">
      <h3>Produto Selecionado</h3>
      <p><strong>Nome:</strong> {{ selectedProduct.name }}</p>
      <p><strong>Preço de Venda:</strong> R$ {{ null | number: '1.2-2' }}</p>
      <label for="quantity">Quantidade:</label>
      <input
        type="number"
        id="quantity"
        [(ngModel)]="quantity"
        min="1"
        placeholder="Digite a quantidade"
      />
      <button (click)="addProductToSale()">Adicionar à Venda</button>
    </div>
  
    <!-- Lista de Produtos na Venda -->
    <div class="sale-products" *ngIf="saleProducts.length > 0">
      <h3>Produtos na Venda</h3>
      <div *ngFor="let product of saleProducts; let i = index" class="product-item">
        <div class="product-info">
          <p><strong>Nome:</strong> {{ product.name }}</p>
          <p><strong>Quantidade:</strong> {{ product.quantity }}</p>
          <p><strong>Preço Unitário:</strong> R$ {{ product.sellingPrice | number: '1.2-2' }}</p>
          <p><strong>Total:</strong> R$ {{ product.quantity * product.sellingPrice | number: '1.2-2' }}</p>
        </div>
        <button (click)="removeProductFromSale(i)">Remover</button>
      </div>
    </div>
  
    <!-- Finalizar Venda -->
    <div class="finalize-sale" *ngIf="saleProducts.length > 0">
      <h3>Total da Venda: R$ {{ calculateTotal() | number: '1.2-2' }}</h3>
      <button (click)="finalizeSale()">Finalizar Venda</button>
    </div>
  </div>